<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>【Debug】Undefined symbols for architecture x86_64等的完整解决方案 | 来自遥远星系的技术空间站</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/4.1.1/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.6.2/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/2.2.3/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">【Debug】Undefined symbols for architecture x86_64等的完整解决方案</h1><a id="logo" href="/.">来自遥远星系的技术空间站</a><p class="description"></p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 博客</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/comment/"><i class="fa fa-comments"> 留言</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">【Debug】Undefined symbols for architecture x86_64等的完整解决方案</h1><div class="post-meta">Sep 22, 2016<span> | </span><span class="category"><a href="/categories/iOS/">iOS</a></span><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> Hits</span></span></div><a data-disqus-identifier="2016/09/22/BugFix/" href="/2016/09/22/BugFix/#disqus_thread" class="disqus-comment-count"></a><div class="post-content"><p>原文出自<a href="http://blog.sina.com.cn/s/blog_8070e98f0102x7fp.html" target="_blank" rel="external">Luca大丑比</a></p>
<p>相信每一个写iOS的同学都遇到过类似的问题，后面的x86_64偶尔也会是其他的架构，如armv7，i386。当然了，这个报错往往会伴随着以下这一句大家都再熟悉不过又最无可奈何说了等于没说的报错……</p>
<p><code>clang: error: linker command failed with exit code 1 (use -v to see invocation)​</code></p>
<p>今天在开发过程中也遇到了这个问题，并且尝试尽自己熟悉的几个方法（下面1-4点）都无法解决，查了4个小时的方法，终于解决了。在这里总结一下这个问题的一些常见解决方案，以及今天我遇到的“在模拟器报错，但是在真机稳定运行”的解决方案。</p>
<p><br></p>
<p>1.最常见问题：m文件没有导入   在Build Phases里的Compile Sources 中添加报错的文件​</p>
<p><img src="http://images.cnitblog.com/blog/561767/201308/27103159-f5015f09f21c45b8b0749a31e263576d.png" alt=""></p>
<p>2.framework文件没有导入静态库编译时往往需要一些库的支持，查看你是否有没有导入的库文件同样是在Build Phases里的Link Binary With Libraries中添加</p>
<p><img src="http://images.cnitblog.com/blog/561767/201308/27103232-71ff22b18cae4fbba9f111af4fb4a34a.png" alt=""></p>
<p>3.重复编译，可能你之前复制过两个地方，在这里添加过两次，删除时系统没有默认删除编译引用地址在Build Settings里搜索Search Paths  将里面Library Search Paths 中没有用到的地址删除</p>
<p><img src="http://images.cnitblog.com/blog/561767/201308/27103303-583181fe731f4b2685d5766b838209cd.png" alt=""></p>
<p>4.另外一个问题，出在静态库生成上面。系统编译生成的静态库有两个，一个真机调用的，一个模拟器调用的。当你在真机测试时导入模拟器静态库，运行就会报错；同样在模拟器测试时调用真机静态库也会报错。</p>
<p>解决这一问题也很简单，就是将两个静态库合并，生成一个兼容的静态库。通过Show in finder 找到两个静态库文件，将两个文件复制到一个文件夹里，当然要进行重命名啦，否则就覆盖了。</p>
<p>下面打开终端，CD到存放两个文件的文件夹。</p>
<p>通过lipo[空格]-create[空格] [真机静态库文件名][空格] [模拟器静态库文件名][空格]-output[空格] [合并后的文件名]</p>
<p><img src="http://images.cnitblog.com/blog/561767/201308/27103338-a4d680822a2a4873a451e1443557014a.png" alt=""></p>
<p>5.当再次遇见这个问题的时候，现象是在模拟器上无论怎么处理，都提示这个报错，但是真机却可以编译成功，甚至打包（Achieve）都可以打出来。<br>删除   /Users/用户名/Library/Developer/Xcode/DerivedData  这个文件夹下对应工程的文件，重新编译即可。</p>
</div><script type="text/javascript" src="/js/share.js?v=0.0.0" async></script><a data-url="http://dbcxl.com/2016/09/22/BugFix/" data-id="citn21da10007j6imndqh5tu3" class="article-share-link">分享到</a><div class="tags"><a href="/tags/BugFix/">BugFix</a></div><div class="post-nav"><a href="/2016/09/28/styleGuide/" class="pre">Objective-C Style Guide</a><a href="/2016/09/12/pugAndSass/" class="next">pug和sass的使用教程</a></div><div id="disqus_thread"><script>var disqus_shortname = 'dbcxl';
var disqus_identifier = '2016/09/22/BugFix/';
var disqus_title = '【Debug】Undefined symbols for architecture x86_64等的完整解决方案';
var disqus_url = 'http://dbcxl.com/2016/09/22/BugFix/';
(function() {
  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//dbcxl.disqus.com/count.js" async></script></div></div></div></div><div class="pure-u-1-4"><div id="sidebar"><div class="widget"><form action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank" class="search-form"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://dbcxl.com"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/">Linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/iOS/">iOS</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/前端/">前端</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/计算机基础/">计算机基础</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/Git/" style="font-size: 15px;">Git</a> <a href="/tags/AFNetworking/" style="font-size: 15px;">AFNetworking</a> <a href="/tags/动画/" style="font-size: 15px;">动画</a> <a href="/tags/BugFix/" style="font-size: 15px;">BugFix</a> <a href="/tags/Foundation框架/" style="font-size: 15px;">Foundation框架</a> <a href="/tags/计算机网络/" style="font-size: 15px;">计算机网络</a> <a href="/tags/Nginx/" style="font-size: 15px;">Nginx</a> <a href="/tags/面向对象/" style="font-size: 15px;">面向对象</a> <a href="/tags/消息传递/" style="font-size: 15px;">消息传递</a> <a href="/tags/LAMP/" style="font-size: 15px;">LAMP</a> <a href="/tags/UI控件/" style="font-size: 15px;">UI控件</a> <a href="/tags/文件I-O/" style="font-size: 15px;">文件I/O</a> <a href="/tags/markdown/" style="font-size: 15px;">markdown</a> <a href="/tags/Style-Guide/" style="font-size: 15px;">Style Guide</a> <a href="/tags/pug/" style="font-size: 15px;">pug</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2016/09/28/styleGuide/">Objective-C Style Guide</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/09/22/BugFix/">【Debug】Undefined symbols for architecture x86_64等的完整解决方案</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/09/12/pugAndSass/">pug和sass的使用教程</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/09/08/Properties/">属性(Properties)</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/07/19/AFNetworking/">浅析AFNetworking（一）</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/07/09/Saving_and_Loading/">保存、读取数据</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/07/03/NSNotificationCenter/">NSNotificationCenter (通知中心)</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/06/24/Animations/">动画(Animation)学习</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/06/21/UITextField/">文本输入 (UITextField)</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/06/19/drawRect/">在视图上面自定义绘图</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-comment-o"> 最近评论</i></div><script type="text/javascript" src="//dbcxl.disqus.com/recent_comments_widget.js?num_items=5&amp;hide_avatars=1&amp;avatar_size=32&amp;excerpt_length=20&amp;hide_mods=1"></script></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="http://llissery.net/" title="llissery的博客" target="_blank">llissery的博客</a><ul></ul><a href="http://hyuni.cn/" title="hyuni的博客" target="_blank">hyuni的博客</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">© <a rel="nofollow" target="_blank" href="https://github.com/KnightJoker">KnightJoker.</a>Touching my heart.</div></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="/css/jquery.fancybox.css?v=0.0.0"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>